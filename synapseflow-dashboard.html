<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SynapseFlow â€” Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="icon.png" />
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#07080f;
  --surface:#0d0f1c;
  --surface2:#131525;
  --surface3:#191c2e;
  --border:rgba(255,255,255,.07);
  --border2:rgba(255,255,255,.04);
  --sage:#3d6b5e;
  --sage-l:#5a8f7e;
  --sage-pale:#c8dcd7;
  --amber:#d4820a;
  --amber-l:#f0a832;
  --red:#ff3d5a;
  --blue:#3d8bff;
  --text:#e4e6f4;
  --muted:rgba(228,230,244,.4);
  --muted2:rgba(228,230,244,.22);
  --fd:'Bebas Neue',sans-serif;
  --fb:'DM Sans',sans-serif;
  --fm:'DM Mono',monospace;
  --sidebar:240px;
  --nav-h:60px;
}
html,body{height:100%;overflow:hidden}
body{background:var(--bg);color:var(--text);font-family:var(--fb);cursor:none}

/* â”€â”€ GRAIN â”€â”€ */
body::after{content:'';position:fixed;inset:0;pointer-events:none;z-index:9000;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");opacity:.8}

/* â”€â”€ CURSOR â”€â”€ */
.cur,.cur-r{position:fixed;border-radius:50%;pointer-events:none;z-index:9999;transform:translate(-50%,-50%)}
.cur{width:9px;height:9px;background:var(--sage-pale);mix-blend-mode:screen;transition:width .2s,height .2s,background .2s}
.cur-r{width:30px;height:30px;border:1px solid rgba(200,220,215,.3);transition:width .22s,height .22s}
.cur.h{width:16px;height:16px;background:var(--amber-l)}
.cur-r.h{width:44px;height:44px}

/* â”€â”€ LAYOUT â”€â”€ */
.app{display:grid;grid-template-columns:var(--sidebar) 1fr;grid-template-rows:var(--nav-h) 1fr;height:100vh;overflow:hidden}

/* â”€â”€ TOPNAV â”€â”€ */
.topnav{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between;padding:0 24px 0 0;background:var(--surface);border-bottom:1px solid var(--border);position:relative;z-index:100}
.topnav-brand{width:var(--sidebar);display:flex;align-items:center;gap:10px;padding:0 20px;border-right:1px solid var(--border);height:100%}
.brand-logo{font-family:var(--fd);font-size:1.3rem;letter-spacing:.1em;color:#fff}
.brand-logo em{color:var(--sage-pale);font-style:normal}
.brand-dot{width:7px;height:7px;border-radius:50%;background:var(--sage);box-shadow:0 0 8px var(--sage);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.5)}}

.topnav-center{display:flex;align-items:center;gap:8px;flex:1;padding:0 24px}
.search-bar{display:flex;align-items:center;gap:10px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:8px 14px;width:260px;transition:border-color .2s}
.search-bar:focus-within{border-color:var(--sage)}
.search-bar input{background:none;border:none;outline:none;font-family:var(--fb);font-size:.82rem;color:var(--text);width:100%}
.search-bar input::placeholder{color:var(--muted2)}
.search-icon{color:var(--muted2);flex-shrink:0}

.topnav-right{display:flex;align-items:center;gap:8px}
.nav-icon-btn{width:36px;height:36px;border-radius:8px;background:none;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--muted);transition:background .2s,border-color .2s,color .2s;position:relative}
.nav-icon-btn:hover{background:var(--surface2);border-color:rgba(255,255,255,.12);color:var(--text)}
.notif-badge{position:absolute;top:6px;right:6px;width:6px;height:6px;background:var(--red);border-radius:50%;border:1px solid var(--surface)}

.user-pill{display:flex;align-items:center;gap:10px;background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:6px 14px 6px 8px;cursor:pointer;transition:border-color .2s;margin-left:4px}
.user-pill:hover{border-color:rgba(255,255,255,.15)}
.user-av{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--sage),var(--sage-l));display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700;color:#fff}
.user-name{font-size:.8rem;font-weight:500}
.user-field{font-size:.64rem;color:var(--muted);font-family:var(--fm)}

/* â”€â”€ SIDEBAR â”€â”€ */
.sidebar{background:var(--surface);border-right:1px solid var(--border);overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;padding:16px 0}
.sidebar::-webkit-scrollbar{width:3px}
.sidebar::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}

.sidebar-section{margin-bottom:6px}
.sidebar-label{font-size:.58rem;letter-spacing:.2em;text-transform:uppercase;color:var(--muted2);padding:8px 20px 4px;font-family:var(--fm)}
.nav-item{display:flex;align-items:center;gap:11px;padding:10px 20px;color:var(--muted);text-decoration:none;font-size:.82rem;transition:background .2s,color .2s;cursor:pointer;border-left:2px solid transparent;position:relative}
.nav-item:hover{background:rgba(255,255,255,.03);color:var(--text)}
.nav-item.active{background:rgba(61,107,94,.12);color:var(--sage-pale);border-left-color:var(--sage)}
.nav-item .nav-badge{margin-left:auto;font-size:.6rem;background:var(--red);color:#fff;padding:1px 6px;border-radius:100px;font-family:var(--fm)}
.nav-item .nav-badge.green{background:rgba(61,107,94,.4);color:var(--sage-pale)}
.nav-icon{width:16px;height:16px;flex-shrink:0;opacity:.7}
.nav-item.active .nav-icon,.nav-item:hover .nav-icon{opacity:1}

.sidebar-footer{margin-top:auto;padding:16px 20px;border-top:1px solid var(--border)}
.score-widget{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:14px}
.score-label{font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);font-family:var(--fm);margin-bottom:8px}
.score-ring-wrap{display:flex;align-items:center;gap:12px}
.score-num{font-family:var(--fd);font-size:2.4rem;letter-spacing:.04em;color:var(--sage-pale);line-height:1}
.score-sub{font-size:.7rem;color:var(--muted);margin-top:3px}
.score-change{font-size:.65rem;color:var(--sage-pale)}

/* â”€â”€ MAIN CONTENT â”€â”€ */
.main{overflow-y:auto;overflow-x:hidden;padding:24px;display:flex;flex-direction:column;gap:20px;background:var(--bg)}
.main::-webkit-scrollbar{width:4px}
.main::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}

/* â”€â”€ PAGE HEADER â”€â”€ */
.page-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:4px}
.page-greeting{font-family:var(--fd);font-size:2.2rem;letter-spacing:.04em;line-height:1;color:#fff}
.page-greeting em{color:var(--sage-pale);font-style:normal}
.page-date{font-family:var(--fm);font-size:.68rem;color:var(--muted);margin-top:4px}
.header-actions{display:flex;gap:8px}
.btn-sm{display:flex;align-items:center;gap:6px;background:var(--surface2);border:1px solid var(--border);border-radius:7px;padding:8px 14px;font-size:.76rem;color:var(--muted);cursor:pointer;font-family:var(--fb);transition:all .2s}
.btn-sm:hover{border-color:var(--sage);color:var(--sage-pale)}
.btn-sm.primary{background:var(--sage);border-color:var(--sage);color:#fff}
.btn-sm.primary:hover{background:var(--sage-l)}

/* â”€â”€ KPI ROW â”€â”€ */
.kpi-row{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
.kpi-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px 20px;position:relative;overflow:hidden;transition:border-color .2s,transform .15s;cursor:pointer}
.kpi-card:hover{border-color:rgba(255,255,255,.14);transform:translateY(-2px)}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--kpi-accent,var(--sage));opacity:.7}
.kpi-label{font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);font-family:var(--fm);margin-bottom:10px;display:flex;align-items:center;justify-content:space-between}
.kpi-val{font-family:var(--fd);font-size:2rem;letter-spacing:.03em;line-height:1;margin-bottom:6px}
.kpi-sub{font-size:.7rem;color:var(--muted)}
.kpi-trend{font-size:.66rem;display:flex;align-items:center;gap:4px;margin-top:6px}
.trend-up{color:var(--red)}
.trend-dn{color:var(--sage-pale)}
.trend-flat{color:var(--muted)}
.kpi-spark{position:absolute;bottom:0;right:0;width:80px;height:40px;opacity:.25}

/* â”€â”€ GRID â”€â”€ */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
.grid-main{display:grid;grid-template-columns:1fr 1fr 320px;gap:14px}
.grid-bottom{display:grid;grid-template-columns:1fr 360px;gap:14px}

.panel{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;overflow:hidden}
.panel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.panel-title{font-size:.65rem;letter-spacing:.18em;text-transform:uppercase;color:var(--muted);font-family:var(--fm);display:flex;align-items:center;gap:8px}
.panel-title-icon{width:18px;height:18px;background:rgba(61,107,94,.18);border-radius:5px;display:flex;align-items:center;justify-content:center}
.panel-badge{font-size:.58rem;background:var(--surface2);border:1px solid var(--border);border-radius:4px;padding:2px 8px;color:var(--blue);letter-spacing:.08em;font-family:var(--fm)}
.panel-badge.amber{color:var(--amber-l)}
.panel-badge.green{color:var(--sage-pale)}
.panel-badge.red{color:var(--red)}

/* â”€â”€ PLATFORM BARS â”€â”€ */
.platform-list{display:flex;flex-direction:column;gap:14px}
.plat-row{display:grid;grid-template-columns:32px 1fr 56px 52px;align-items:center;gap:12px}
.plat-logo{width:32px;height:32px;border-radius:9px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:5px}
.plat-info{}
.plat-name{font-size:.82rem;font-weight:500;margin-bottom:3px}
.plat-track{height:4px;background:rgba(255,255,255,.06);border-radius:2px;overflow:hidden}
.plat-fill{height:100%;border-radius:2px;transition:width 1.2s cubic-bezier(.4,0,.2,1)}
.plat-time{font-family:var(--fm);font-size:.72rem;color:var(--muted);text-align:right}
.plat-status{font-size:.6rem;padding:2px 8px;border-radius:100px;text-align:center;font-family:var(--fm);font-weight:400}
.s-over{background:rgba(255,61,90,.12);color:var(--red);border:1px solid rgba(255,61,90,.2)}
.s-ok{background:rgba(61,107,94,.12);color:var(--sage-pale);border:1px solid rgba(61,107,94,.2)}
.s-warn{background:rgba(212,130,10,.12);color:var(--amber-l);border:1px solid rgba(212,130,10,.2)}

/* â”€â”€ CHARTS â”€â”€ */
canvas{display:block}
.chart-wrap{position:relative}

/* â”€â”€ AI INSIGHTS â”€â”€ */
.insight-list{display:flex;flex-direction:column;gap:10px}
.insight-card{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:14px;position:relative;overflow:hidden;transition:border-color .2s}
.insight-card:hover{border-color:rgba(61,107,94,.35)}
.insight-card::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--ic-col,var(--sage))}
.insight-card.warn{--ic-col:var(--amber)}
.insight-card.crit{--ic-col:var(--red)}
.insight-card.good{--ic-col:var(--sage)}
.insight-card.info{--ic-col:var(--blue)}
.insight-head{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;margin-bottom:6px}
.insight-title{font-size:.8rem;font-weight:500;line-height:1.4}
.insight-ico{font-size:1rem;flex-shrink:0}
.insight-body{font-size:.74rem;color:var(--muted);line-height:1.6}
.insight-action{display:inline-flex;align-items:center;gap:5px;font-size:.68rem;color:var(--sage-pale);margin-top:8px;cursor:pointer;transition:color .2s}
.insight-action:hover{color:#fff}

/* â”€â”€ WEEKLY HEATMAP â”€â”€ */
.heatmap-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-top:4px}
.hm-cell{aspect-ratio:1;border-radius:4px;cursor:pointer;position:relative;transition:transform .15s}
.hm-cell:hover{transform:scale(1.15)}
.hm-0{background:rgba(255,255,255,.04)}
.hm-1{background:rgba(61,107,94,.3)}
.hm-2{background:rgba(61,107,94,.55)}
.hm-3{background:rgba(212,130,10,.5)}
.hm-4{background:rgba(255,61,90,.5)}
.hm-labels{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:4px}
.hm-day{font-size:.55rem;text-align:center;color:var(--muted2);font-family:var(--fm)}

/* â”€â”€ STREAK â”€â”€ */
.streak-row{display:flex;gap:4px;margin-top:8px}
.streak-block{flex:1;height:24px;border-radius:4px;transition:transform .1s}
.streak-block:hover{transform:scaleY(1.2)}

/* â”€â”€ GOAL PROGRESS â”€â”€ */
.goal-list{display:flex;flex-direction:column;gap:12px}
.goal-item{}
.goal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;font-size:.78rem}
.goal-name{font-weight:500}
.goal-pct{font-family:var(--fm);font-size:.7rem;color:var(--muted)}
.goal-bar{height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden}
.goal-fill{height:100%;border-radius:3px;transition:width 1.2s cubic-bezier(.4,0,.2,1)}
.goal-sub{font-size:.65rem;color:var(--muted);margin-top:4px}

/* â”€â”€ ACTIVITY FEED â”€â”€ */
.activity-list{display:flex;flex-direction:column;gap:0}
.activity-item{display:flex;gap:12px;padding:12px 0;border-bottom:1px solid var(--border2)}
.activity-item:last-child{border-bottom:none}
.activity-dot-wrap{display:flex;flex-direction:column;align-items:center;gap:0}
.activity-dot{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:5px}
.activity-body{flex:1}
.activity-msg{font-size:.78rem;line-height:1.5;color:var(--text)}
.activity-msg strong{color:#fff;font-weight:500}
.activity-time{font-size:.62rem;color:var(--muted2);font-family:var(--fm);margin-top:3px}

/* â”€â”€ FOCUS RING â”€â”€ */
.focus-ring-wrap{display:flex;justify-content:center;padding:8px 0}
.focus-ring-svg{overflow:visible}

/* â”€â”€ TAB BAR â”€â”€ */
.tab-bar{display:flex;gap:2px;background:var(--surface2);border-radius:8px;padding:3px;margin-bottom:16px}
.tab{flex:1;padding:7px;text-align:center;font-size:.72rem;border-radius:6px;cursor:pointer;color:var(--muted);transition:background .2s,color .2s;letter-spacing:.05em}
.tab.active{background:var(--sage);color:#fff}

/* â”€â”€ PLATFORM COMPARISON â”€â”€ */
.plat-compare{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:4px}
.pc-card{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center;transition:border-color .2s}
.pc-card:hover{border-color:rgba(255,255,255,.14)}
.pc-icon{width:36px;height:36px;border-radius:10px;margin:0 auto 8px;display:flex;align-items:center;justify-content:center;padding:6px}
.pc-time{font-family:var(--fd);font-size:1.4rem;letter-spacing:.04em;margin-bottom:2px}
.pc-label{font-size:.62rem;color:var(--muted);font-family:var(--fm)}
.pc-change{font-size:.62rem;margin-top:4px}

/* â”€â”€ MINI SPARKLINE â”€â”€ */
.spark-inline{display:inline-block;vertical-align:middle}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.fade-1{animation:fadeUp .5s .05s both}
.fade-2{animation:fadeUp .5s .12s both}
.fade-3{animation:fadeUp .5s .19s both}
.fade-4{animation:fadeUp .5s .26s both}
.fade-5{animation:fadeUp .5s .33s both}
.fade-6{animation:fadeUp .5s .40s both}

/* â”€â”€ TOOLTIP â”€â”€ */
.tooltip{position:fixed;background:var(--surface3);border:1px solid var(--border);border-radius:7px;padding:7px 12px;font-size:.72rem;font-family:var(--fm);color:var(--text);pointer-events:none;z-index:8000;opacity:0;transition:opacity .15s;white-space:nowrap}
.tooltip.show{opacity:1}

/* â”€â”€ SCROLLBAR â”€â”€ */
::-webkit-scrollbar{width:3px;height:3px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:1100px){
  :root{--sidebar:200px}
  .grid-main{grid-template-columns:1fr 1fr}
  .kpi-row{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>

<div class="cur" id="cur"></div>
<div class="cur-r" id="cur-r"></div>
<div class="tooltip" id="tooltip"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APP SHELL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="app">

<!-- â”€â”€ TOPNAV â”€â”€ -->
<nav class="topnav">
  <div class="topnav-brand">
    <div class="brand-dot"></div>
    <div class="brand-logo">Synapse<em>Flow</em></div>
  </div>
  <div class="topnav-center">
    <div class="search-bar">
      <svg class="search-icon" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input type="text" placeholder="Search platforms, insightsâ€¦">
    </div>
    <div style="display:flex;align-items:center;gap:6px;margin-left:8px">
      <button class="btn-sm" onclick="cycleDate(-1)">
        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M15 18l-6-6 6-6"/></svg>
      </button>
      <span id="date-label" style="font-family:var(--fm);font-size:.7rem;color:var(--muted);min-width:120px;text-align:center"></span>
      <button class="btn-sm" onclick="cycleDate(1)">
        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg>
      </button>
    </div>
  </div>
  <div class="topnav-right">
    <button class="nav-icon-btn" title="Notifications">
      <div class="notif-badge"></div>
      <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
    </button>
    <button class="nav-icon-btn" title="Settings">
      <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
    </button>
    <a href="synapseflow-auth.html" class="nav-icon-btn" title="Log Out">
      <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </a>
    <div class="user-pill">
      <div class="user-av">D</div>
      <div>
        <div class="user-name">Daniel</div>
        <div class="user-field">Technology</div>
      </div>
    </div>
  </div>
</nav>

<!-- â”€â”€ SIDEBAR â”€â”€ -->
<aside class="sidebar">
  <div class="sidebar-section">
    <div class="sidebar-label">Overview</div>
    <div class="nav-item active" onclick="setPage('dashboard')">
      <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
      Dashboard
    </div>
    <div class="nav-item" onclick="setPage('analytics')">
      <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
      Analytics
    </div>
    <div class="nav-item" onclick="setPage('insights')">
      <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.26C5.19 13.47 4 11.38 4 9a7 7 0 0 1 8-6.93"/></svg>
      AI Insights
      <span class="nav-badge">3</span>
    </div>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-label">Platforms</div>
    <!-- LinkedIn -->
    <div class="nav-item" onclick="setPage('linkedin')">
      <span style="width:16px;height:16px;background:#0077b5;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      </span>
      LinkedIn
      <span class="nav-badge green">42m</span>
    </div>
    <!-- Instagram -->
    <div class="nav-item" onclick="setPage('instagram')">
      <span style="width:16px;height:16px;background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888);border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>
      </span>
      Instagram
      <span class="nav-badge" style="background:rgba(225,48,108,.15);color:#e1306c;border:1px solid rgba(225,48,108,.2)">1h 34m</span>
    </div>
    <!-- TikTok -->
    <div class="nav-item" onclick="setPage('tiktok')">
      <span style="width:16px;height:16px;background:#111;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px;border:1px solid rgba(255,255,255,.1)">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.75a4.85 4.85 0 0 1-1.01-.06z"/></svg>
      </span>
      TikTok
      <span class="nav-badge" style="background:rgba(255,61,90,.15);color:var(--red);border:1px solid rgba(255,61,90,.2)">2h 12m</span>
    </div>
    <!-- X/Twitter -->
    <div class="nav-item" onclick="setPage('twitter')">
      <span style="width:16px;height:16px;background:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px;border:1px solid rgba(255,255,255,.12)">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.748l7.73-8.835L1.254 2.25H8.08l4.261 5.632 5.903-5.632zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/></svg>
      </span>
      X / Twitter
      <span class="nav-badge green">28m</span>
    </div>
    <!-- WhatsApp -->
    <div class="nav-item" onclick="setPage('whatsapp')">
      <span style="width:16px;height:16px;background:#25d366;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
      </span>
      WhatsApp
      <span class="nav-badge green">52m</span>
    </div>
    <!-- Facebook -->
    <div class="nav-item" onclick="setPage('facebook')">
      <span style="width:16px;height:16px;background:#1877f2;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:2px">
        <svg viewBox="0 0 24 24" fill="white" width="12" height="12"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
      </span>
      Facebook
      <span class="nav-badge green">18m</span>
    </div>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-label">Tools</div>
    <div class="nav-item" onclick="setPage('goals')">
      <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
      Goals
    </div>
    <div class="nav-item" onclick="setPage('reports')">
      <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
      Reports
    </div>
  </div>
  <div class="sidebar-footer">
    <div class="score-widget">
      <div class="score-label">Today's Focus Score</div>
      <div class="score-ring-wrap">
        <svg width="48" height="48" viewBox="0 0 48 48">
          <circle cx="24" cy="24" r="20" fill="none" stroke="rgba(255,255,255,.07)" stroke-width="4"/>
          <circle cx="24" cy="24" r="20" fill="none" stroke="url(#scoreGrad)" stroke-width="4"
            stroke-dasharray="125.66" stroke-dashoffset="37.7" stroke-linecap="round"
            transform="rotate(-90 24 24)"/>
          <defs><linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#3d6b5e"/>
            <stop offset="100%" stop-color="#c8dcd7"/>
          </linearGradient></defs>
        </svg>
        <div>
          <div class="score-num" id="focus-score">72</div>
          <div class="score-sub">out of 100</div>
          <div class="score-change">â†‘ +8 from yesterday</div>
        </div>
      </div>
    </div>
  </div>
</aside>

<!-- â”€â”€ MAIN CONTENT â”€â”€ -->
<main class="main" id="main-content">

  <!-- Page Header -->
  <div class="page-header fade-1">
    <div>
      <div class="page-greeting">Good Morning, <em>Daniel</em> ğŸ‘‹</div>
      <div class="page-date" id="full-date"></div>
    </div>
    <div class="header-actions">
      <button class="btn-sm" onclick="exportReport()">
        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Export Report
      </button>
      <button class="btn-sm primary">
        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
        Add Platform
      </button>
    </div>
  </div>

  <!-- KPI Row -->
  <div class="kpi-row fade-2">
    <div class="kpi-card" style="--kpi-accent:var(--sage)">
      <div class="kpi-label">Total Screen Time <span style="color:var(--sage-pale);font-size:.58rem">TODAY</span></div>
      <div class="kpi-val" style="color:var(--sage-pale)" id="kpi-total">4h 48m</div>
      <div class="kpi-sub">Daily goal: 3h 00m</div>
      <div class="kpi-trend trend-up">â†‘ 48m over your goal</div>
      <svg class="kpi-spark" id="spark-total"></svg>
    </div>
    <div class="kpi-card" style="--kpi-accent:var(--amber)">
      <div class="kpi-label">Focus Score <span style="color:var(--amber-l);font-size:.58rem">LIVE</span></div>
      <div class="kpi-val" style="color:var(--amber-l)" id="kpi-score">72</div>
      <div class="kpi-sub">Based on usage alignment</div>
      <div class="kpi-trend trend-dn">â†‘ +8 from yesterday</div>
      <svg class="kpi-spark" id="spark-score"></svg>
    </div>
    <div class="kpi-card" style="--kpi-accent:var(--red)">
      <div class="kpi-label">Most Used <span style="color:var(--red);font-size:.58rem">âš  HIGH</span></div>
      <div class="kpi-val" style="color:var(--red)">TikTok</div>
      <div class="kpi-sub">2h 12m â€” 46% of total</div>
      <div class="kpi-trend trend-up">â†‘ 22m vs yesterday</div>
      <svg class="kpi-spark" id="spark-most"></svg>
    </div>
    <div class="kpi-card" style="--kpi-accent:var(--blue)">
      <div class="kpi-label">Streak <span style="color:var(--blue);font-size:.58rem">ğŸ”¥</span></div>
      <div class="kpi-val" style="color:var(--blue)">14</div>
      <div class="kpi-sub">Days below weekly avg</div>
      <div class="kpi-trend trend-dn">â†‘ Personal best!</div>
      <svg class="kpi-spark" id="spark-streak"></svg>
    </div>
  </div>

  <!-- Main Grid: Chart + Platform Bars + AI Insights -->
  <div class="grid-main fade-3">

    <!-- Usage Over Time Chart -->
    <div class="panel">
      <div class="panel-head">
        <div class="panel-title">
          <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div>
          Usage Timeline
        </div>
        <div style="display:flex;gap:6px">
          <div class="tab-bar" style="margin-bottom:0;width:auto">
            <div class="tab active" onclick="setChartRange('day',this)">Day</div>
            <div class="tab" onclick="setChartRange('week',this)">Week</div>
            <div class="tab" onclick="setChartRange('month',this)">Month</div>
          </div>
        </div>
      </div>
      <div class="chart-wrap">
        <canvas id="chart-timeline" height="160"></canvas>
      </div>
      <!-- Legend -->
      <div style="display:flex;gap:16px;margin-top:12px;flex-wrap:wrap">
        <div style="display:flex;align-items:center;gap:6px;font-size:.68rem;color:var(--muted)"><span style="width:20px;height:2px;background:#69c9d0;display:inline-block;border-radius:1px"></span>TikTok</div>
        <div style="display:flex;align-items:center;gap:6px;font-size:.68rem;color:var(--muted)"><span style="width:20px;height:2px;background:#e1306c;display:inline-block;border-radius:1px"></span>Instagram</div>
        <div style="display:flex;align-items:center;gap:6px;font-size:.68rem;color:var(--muted)"><span style="width:20px;height:2px;background:#0077b5;display:inline-block;border-radius:1px"></span>LinkedIn</div>
        <div style="display:flex;align-items:center;gap:6px;font-size:.68rem;color:var(--muted)"><span style="width:20px;height:2px;background:#25d366;display:inline-block;border-radius:1px"></span>WhatsApp</div>
        <div style="display:flex;align-items:center;gap:6px;font-size:.68rem;color:var(--muted)"><span style="width:20px;height:2px;background:#1da1f2;display:inline-block;border-radius:1px"></span>X</div>
      </div>
    </div>

    <!-- Platform Breakdown -->
    <div class="panel">
      <div class="panel-head">
        <div class="panel-title">
          <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
          Platform Breakdown
        </div>
        <div class="panel-badge">Today</div>
      </div>
      <div class="platform-list" id="platform-list">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- AI Insights Panel -->
    <div class="panel">
      <div class="panel-head">
        <div class="panel-title">
          <div class="panel-title-icon" style="background:rgba(212,130,10,.18)"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--amber-l)" stroke-width="2"><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.26C5.19 13.47 4 11.38 4 9a7 7 0 0 1 8-6.93"/></svg></div>
          AI Insights
        </div>
        <div class="panel-badge amber">3 New</div>
      </div>
      <div class="insight-list" id="insight-list">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Bottom Grid: Heatmap + Goals + Activity -->
  <div class="grid-bottom fade-4">

    <!-- Left: Weekly heatmap + platform comparison -->
    <div style="display:flex;flex-direction:column;gap:14px">

      <!-- Weekly Heatmap -->
      <div class="panel">
        <div class="panel-head">
          <div class="panel-title">
            <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
            30-Day Activity Heatmap
          </div>
          <div style="display:flex;align-items:center;gap:8px;font-size:.62rem;color:var(--muted2)">
            <span>Low</span>
            <div style="display:flex;gap:2px">
              <div style="width:10px;height:10px;border-radius:2px;background:rgba(255,255,255,.04)"></div>
              <div style="width:10px;height:10px;border-radius:2px;background:rgba(61,107,94,.3)"></div>
              <div style="width:10px;height:10px;border-radius:2px;background:rgba(61,107,94,.55)"></div>
              <div style="width:10px;height:10px;border-radius:2px;background:rgba(212,130,10,.5)"></div>
              <div style="width:10px;height:10px;border-radius:2px;background:rgba(255,61,90,.5)"></div>
            </div>
            <span>High</span>
          </div>
        </div>
        <div class="hm-labels" id="hm-labels"></div>
        <div class="heatmap-grid" id="heatmap"></div>
      </div>

      <!-- Platform Comparison -->
      <div class="panel">
        <div class="panel-head">
          <div class="panel-title">
            <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
            Top Platforms This Week
          </div>
          <div class="panel-badge green">7-day view</div>
        </div>
        <div class="plat-compare" id="plat-compare"></div>
      </div>
    </div>

    <!-- Right: Goals + Activity Feed -->
    <div style="display:flex;flex-direction:column;gap:14px">

      <!-- Goals -->
      <div class="panel">
        <div class="panel-head">
          <div class="panel-title">
            <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div>
            Daily Goals
          </div>
          <div class="panel-badge">Friday</div>
        </div>
        <div class="goal-list" id="goal-list"></div>
      </div>

      <!-- Activity Feed -->
      <div class="panel" style="flex:1">
        <div class="panel-head">
          <div class="panel-title">
            <div class="panel-title-icon"><svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="var(--sage-pale)" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
            Activity Feed
          </div>
          <div class="panel-badge" style="color:var(--muted2)">Live</div>
        </div>
        <div class="activity-list" id="activity-feed"></div>
      </div>
    </div>
  </div>

  <!-- Bottom spacer -->
  <div style="height:8px"></div>
</main>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CURSOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const cur=document.getElementById('cur'),curR=document.getElementById('cur-r');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cur.style.left=mx+'px';cur.style.top=my+'px'});
(function ar(){rx+=(mx-rx)*.13;ry+=(my-ry)*.13;curR.style.left=rx+'px';curR.style.top=ry+'px';requestAnimationFrame(ar)})();
document.querySelectorAll('a,button,.nav-item,.kpi-card,.panel,.plat-row,.insight-card,.hm-cell,.tab,.pc-card').forEach(el=>{
  el.addEventListener('mouseenter',()=>{cur.classList.add('h');curR.classList.add('h')});
  el.addEventListener('mouseleave',()=>{cur.classList.remove('h');curR.classList.remove('h')});
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOOLTIP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const tooltip=document.getElementById('tooltip');
function showTip(e,text){
  tooltip.textContent=text;
  tooltip.classList.add('show');
  moveTip(e);
}
function moveTip(e){tooltip.style.left=(e.clientX+14)+'px';tooltip.style.top=(e.clientY-8)+'px'}
function hideTip(){tooltip.classList.remove('show')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let dateOffset=0;
function getDisplayDate(){
  const d=new Date();d.setDate(d.getDate()+dateOffset);return d;
}
function cycleDate(dir){
  if(dateOffset+dir>0)return;
  dateOffset+=dir;updateDateLabel();refreshAll();
}
function updateDateLabel(){
  const d=getDisplayDate();
  const opts={weekday:'short',month:'short',day:'numeric',year:'numeric'};
  document.getElementById('date-label').textContent=d.toLocaleDateString('en-GB',opts);
  document.getElementById('full-date').textContent=
    'Your digital activity report for '+d.toLocaleDateString('en-GB',{weekday:'long',month:'long',day:'numeric'});
}
updateDateLabel();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PLATFORMS=[
  {name:'TikTok',        color:'#69c9d0', bg:'#111',    mins:132, goal:60,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.75a4.85 4.85 0 0 1-1.01-.06z"/></svg>'},
  {name:'Instagram',     color:'#e1306c', bg:'linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)', mins:94, goal:45,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>'},
  {name:'WhatsApp',      color:'#25d366', bg:'#128C7E', mins:52, goal:60,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>'},
  {name:'LinkedIn',      color:'#0077b5', bg:'#0077b5', mins:42, goal:30,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>'},
  {name:'X / Twitter',   color:'#1da1f2', bg:'#000',   mins:28, goal:20,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.748l7.73-8.835L1.254 2.25H8.08l4.261 5.632 5.903-5.632zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/></svg>'},
  {name:'Facebook',      color:'#1877f2', bg:'#1877f2', mins:18, goal:15,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>'},
];

function fmtMins(m){
  if(m<60)return m+'m';
  return Math.floor(m/60)+'h '+(m%60?m%60+'m':'');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLATFORM LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPlatforms(){
  const total=PLATFORMS.reduce((s,p)=>s+p.mins,0);
  document.getElementById('platform-list').innerHTML=PLATFORMS.map(p=>{
    const pct=Math.round(p.mins/total*100);
    const overGoal=p.mins>p.goal;
    const nearGoal=p.mins>p.goal*.8 && !overGoal;
    const statusClass=overGoal?'s-over':nearGoal?'s-warn':'s-ok';
    const statusText=overGoal?'Over limit':nearGoal?'Near limit':'On track';
    return `<div class="plat-row">
      <div class="plat-logo" style="background:${p.bg}">${p.svg}</div>
      <div class="plat-info">
        <div class="plat-name">${p.name}</div>
        <div class="plat-track"><div class="plat-fill" style="width:${pct}%;background:${p.color}"></div></div>
      </div>
      <div class="plat-time">${fmtMins(p.mins)}</div>
      <div class="plat-status ${statusClass}">${statusText}</div>
    </div>`;
  }).join('');
}
renderPlatforms();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI INSIGHTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const INSIGHTS=[
  {type:'crit',icon:'ğŸš¨',title:'TikTok usage 120% above your daily goal',body:'You\'ve spent 2h 12m on TikTok â€” double your 60-min goal. For a Tech career, redirecting 45 min to GitHub or LinkedIn learning could yield 3Ã— better ROI this week.',action:'Set a TikTok limit'},
  {type:'warn',icon:'âš¡',title:'Peak distraction window: 8â€“10 PM',body:'Your last 7 days show 68% of excess scrolling happens after 8 PM. Consider enabling focus mode from 8 PMâ€“10 PM during your study sessions.',action:'Enable Focus Mode'},
  {type:'good',icon:'ğŸ¯',title:'LinkedIn engagement is career-aligned',body:'Your 42-min LinkedIn session today included 28 min on tech articles and job posts. This is highly aligned with your Technology career goal.',action:'View LinkedIn breakdown'},
  {type:'info',icon:'ğŸ“Š',title:'Weekly trend: +12% improvement overall',body:'Your total productive usage (LinkedIn + X tech news) vs passive scrolling ratio improved from 24% to 36% this week. You\'re trending in the right direction.',action:'See weekly report'},
];

document.getElementById('insight-list').innerHTML=INSIGHTS.map(ins=>`
  <div class="insight-card ${ins.type}">
    <div class="insight-head">
      <div class="insight-title">${ins.title}</div>
      <div class="insight-ico">${ins.icon}</div>
    </div>
    <div class="insight-body">${ins.body}</div>
    <div class="insight-action">${ins.action} <svg width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M13 6l6 6-6 6"/></svg></div>
  </div>`).join('');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GOALS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GOALS=[
  {name:'Total screen time',current:288,target:180,unit:'min',color:'var(--sage)'},
  {name:'LinkedIn (career)',current:42,target:30,unit:'min',color:'#0077b5'},
  {name:'TikTok limit',current:132,target:60,unit:'min',color:'var(--red)'},
  {name:'Instagram limit',current:94,target:45,unit:'min',color:'#e1306c'},
];
document.getElementById('goal-list').innerHTML=GOALS.map(g=>{
  const pct=Math.min(100,Math.round(g.current/g.target*100));
  const over=g.current>g.target;
  return `<div class="goal-item">
    <div class="goal-head">
      <span class="goal-name">${g.name}</span>
      <span class="goal-pct" style="color:${over?'var(--red)':'var(--muted)'}">${fmtMins(g.current)} / ${fmtMins(g.target)}</span>
    </div>
    <div class="goal-bar"><div class="goal-fill" style="width:${pct}%;background:${g.color}"></div></div>
    <div class="goal-sub">${over?'âš  '+fmtMins(g.current-g.target)+' over goal':'âœ“ '+fmtMins(g.target-g.current)+' remaining'}</div>
  </div>`;
}).join('');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACTIVITY FEED
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ACTIVITIES=[
  {icon:'<svg viewBox="0 0 24 24" fill="white" width="14" height="14"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.75a4.85 4.85 0 0 1-1.01-.06z"/></svg>',ibg:'#111',
   msg:'<strong>TikTok</strong> session ended â€” 47 min. <span style="color:var(--red)">Goal exceeded by 17 min.</span>',time:'2 min ago'},
  {icon:'<svg viewBox="0 0 24 24" fill="white" width="14" height="14"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>',ibg:'linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)',
   msg:'<strong>Instagram</strong> daily goal reached â€” 45 min used. <span style="color:var(--amber-l)">22 min remaining.</span>',time:'18 min ago'},
  {icon:'<svg viewBox="0 0 24 24" fill="white" width="14" height="14"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',ibg:'#0077b5',
   msg:'<strong>LinkedIn</strong> career session â€” 28 min on tech articles. <span style="color:var(--sage-pale)">Career-aligned âœ“</span>',time:'1h 12m ago'},
  {icon:'<svg fill="none" viewBox="0 0 24 24" stroke="white" stroke-width="1.8" width="14" height="14"><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.26C5.19 13.47 4 11.38 4 9a7 7 0 0 1 8-6.93"/></svg>',ibg:'var(--sage)',
   msg:'<strong>New AI Insight</strong> generated â€” TikTok distraction pattern detected in evening hours.',time:'2h 30m ago'},
  {icon:'<svg fill="none" viewBox="0 0 24 24" stroke="white" stroke-width="1.8" width="14" height="14"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',ibg:'var(--blue)',
   msg:'<strong>Daily report ready</strong> â€” Thursday summary available for download.',time:'Yesterday'},
];
document.getElementById('activity-feed').innerHTML=ACTIVITIES.map(a=>`
  <div class="activity-item">
    <div class="activity-dot" style="background:${a.ibg}">${a.icon}</div>
    <div class="activity-body">
      <div class="activity-msg">${a.msg}</div>
      <div class="activity-time">${a.time}</div>
    </div>
  </div>`).join('');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HEATMAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const days=['M','T','W','T','F','S','S'];
document.getElementById('hm-labels').innerHTML=days.map(d=>`<div class="hm-day">${d}</div>`).join('');
// 30 cells of data
const hmData=[0,1,2,1,3,4,2,1,2,3,2,1,0,1,3,4,3,2,1,2,1,0,1,2,3,2,1,2,3,2];
document.getElementById('heatmap').innerHTML=hmData.map((v,i)=>{
  const labels=['No usage','Light: <1h','Moderate: 1-2h','High: 2-4h','Over limit: 4h+'];
  return `<div class="hm-cell hm-${v}" 
    onmouseenter="e=>showTip(e,'${labels[v]}')" 
    onmousemove="event=>moveTip(event)" 
    onmouseleave="hideTip()"
    onclick="showTip(event,'Day ${i+1}: ${labels[v]}')"
    title="Day ${i+1}: ${labels[v]}"></div>`;
}).join('');

// fix tooltip on heatmap cells
document.querySelectorAll('.hm-cell').forEach((cell,i)=>{
  const labels=['No usage','Light: <1h','Moderate: 1â€“2h','High: 2â€“4h','Over limit: 4h+'];
  cell.addEventListener('mouseenter',e=>showTip(e,`Day ${i+1}: ${labels[hmData[i]]}`));
  cell.addEventListener('mousemove',moveTip);
  cell.addEventListener('mouseleave',hideTip);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLATFORM COMPARISON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const weekData=[
  {name:'TikTok',      bg:'#111',    color:'#69c9d0',total:'14h 20m',change:'+12%',up:true,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.75a4.85 4.85 0 0 1-1.01-.06z"/></svg>'},
  {name:'Instagram',   bg:'linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)',color:'#e1306c',total:'9h 14m',change:'-8%',up:false,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>'},
  {name:'LinkedIn',    bg:'#0077b5',color:'#5fb8ff',total:'4h 52m',change:'+34%',up:true,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>'},
  {name:'WhatsApp',    bg:'#128C7E',color:'#25d366',total:'5h 48m',change:'-4%',up:false,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>'},
  {name:'X / Twitter', bg:'#000',   color:'#6bc5f8',total:'3h 16m',change:'+5%',up:true,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.748l7.73-8.835L1.254 2.25H8.08l4.261 5.632 5.903-5.632zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/></svg>'},
  {name:'Facebook',    bg:'#1877f2',color:'#74a8fb',total:'1h 56m',change:'-14%',up:false,
   svg:'<svg viewBox="0 0 24 24" fill="white" width="20" height="20"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>'},
];
document.getElementById('plat-compare').innerHTML=weekData.map(p=>`
  <div class="pc-card">
    <div class="pc-icon" style="background:${p.bg}">${p.svg}</div>
    <div class="pc-time" style="color:${p.color}">${p.total}</div>
    <div class="pc-label">${p.name}</div>
    <div class="pc-change" style="color:${p.up?'var(--red)':'var(--sage-pale)'}">${p.change} vs last week</div>
  </div>`).join('');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHARTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentRange='day';
let chartAnimFrame=null;

function drawTimeline(){
  const cv=document.getElementById('chart-timeline');
  if(!cv)return;
  const dpr=window.devicePixelRatio||1;
  const W=cv.parentElement.offsetWidth,H=160;
  cv.width=W*dpr;cv.height=H*dpr;cv.style.width=W+'px';cv.style.height=H+'px';
  const ctx=cv.getContext('2d');ctx.scale(dpr,dpr);

  const pad={t:10,r:10,b:28,l:36};
  const cW=W-pad.l-pad.r,cH=H-pad.t-pad.b;

  // generate data
  const labels=currentRange==='day'
    ?['6AM','7AM','8AM','9AM','10AM','11AM','12PM','1PM','2PM','3PM','4PM','5PM','6PM','7PM','8PM','9PM']
    :currentRange==='week'?['Mon','Tue','Wed','Thu','Fri','Sat','Sun']
    :['W1','W2','W3','W4'];

  const series=[
    {c:'#69c9d0',d:labels.map(()=>Math.round(Math.random()*40+5))},
    {c:'#e1306c',d:labels.map(()=>Math.round(Math.random()*35+3))},
    {c:'#0077b5',d:labels.map(()=>Math.round(Math.random()*20+2))},
    {c:'#25d366',d:labels.map(()=>Math.round(Math.random()*18+2))},
    {c:'#1da1f2',d:labels.map(()=>Math.round(Math.random()*15+1))},
  ];

  const allVals=series.flatMap(s=>s.d);
  const maxV=Math.max(...allVals)*1.15;

  const xS=i=>pad.l+(i/(labels.length-1))*cW;
  const yS=v=>pad.t+cH-((v/maxV)*cH);

  // grid
  ctx.strokeStyle='rgba(255,255,255,.05)';ctx.lineWidth=1;
  for(let g=0;g<=4;g++){
    const y=pad.t+(g/4)*cH;
    ctx.beginPath();ctx.moveTo(pad.l,y);ctx.lineTo(pad.l+cW,y);ctx.stroke();
    ctx.fillStyle='rgba(228,230,244,.25)';ctx.font=`10px 'DM Mono',monospace`;
    ctx.textAlign='right';
    ctx.fillText(Math.round(maxV-(g/4)*maxV)+'m',pad.l-4,y+3);
  }

  // X labels
  ctx.fillStyle='rgba(228,230,244,.28)';ctx.font=`9px 'DM Mono',monospace`;ctx.textAlign='center';
  const step=Math.max(1,Math.floor(labels.length/6));
  labels.forEach((l,i)=>{if(i%step===0)ctx.fillText(l,xS(i),H-6)});

  // lines + fills
  series.forEach(s=>{
    // fill
    ctx.beginPath();
    ctx.moveTo(xS(0),yS(s.d[0]));
    s.d.forEach((v,i)=>ctx.lineTo(xS(i),yS(v)));
    ctx.lineTo(xS(s.d.length-1),pad.t+cH);
    ctx.lineTo(pad.l,pad.t+cH);
    ctx.closePath();
    const grd=ctx.createLinearGradient(0,pad.t,0,pad.t+cH);
    grd.addColorStop(0,s.c.replace('#','rgba(').replace(/^rgba\(([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\)/i,(_,r,g,b)=>`rgba(${parseInt(r,16)},${parseInt(g,16)},${parseInt(b,16)}`)+',0.12)');
    grd.addColorStop(1,'transparent');
    ctx.fillStyle=grd;ctx.fill();
    // line
    ctx.beginPath();
    ctx.moveTo(xS(0),yS(s.d[0]));
    s.d.forEach((v,i)=>ctx.lineTo(xS(i),yS(v)));
    ctx.strokeStyle=s.c;ctx.lineWidth=2;
    ctx.shadowColor=s.c;ctx.shadowBlur=4;
    ctx.stroke();ctx.shadowBlur=0;
  });
}

function drawSparkline(cvId,color,up){
  const cv=document.getElementById(cvId);if(!cv)return;
  const W=80,H=40;cv.setAttribute('width',W);cv.setAttribute('height',H);
  const ctx=cv.getContext('2d');ctx.clearRect(0,0,W,H);
  const data=Array.from({length:10},(_,i)=>Math.round(30+Math.random()*30+(up?i*2:-i*1.5)));
  const mn=Math.min(...data),mx=Math.max(...data);
  const xS=i=>(i/(data.length-1))*W;
  const yS=v=>H-((v-mn)/(mx-mn||1))*(H-4)-2;
  ctx.beginPath();ctx.moveTo(xS(0),yS(data[0]));
  data.forEach((v,i)=>ctx.lineTo(xS(i),yS(v)));
  ctx.strokeStyle=color;ctx.lineWidth=1.5;ctx.stroke();
}

function drawAllCharts(){
  drawTimeline();
  drawSparkline('spark-total','#5a8f7e',false);
  drawSparkline('spark-score','#f0a832',true);
  drawSparkline('spark-most','#ff3d5a',true);
  drawSparkline('spark-streak','#3d8bff',true);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIVE SIMULATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let simTick=0;
function simulate(){
  simTick++;
  // Drift platform minutes
  PLATFORMS.forEach(p=>{
    if(Math.random()<0.3){
      const delta=Math.random()<0.7?1:-1;
      p.mins=Math.max(0,p.mins+delta);
    }
  });
  // Update focus score
  const score=Math.min(99,Math.max(10,72+(Math.random()-.5)*4));
  document.getElementById('kpi-score').textContent=Math.round(score);
  document.getElementById('focus-score').textContent=Math.round(score);

  // Redraw
  if(simTick%3===0){renderPlatforms();drawTimeline()}
  drawSparkline('spark-total','#5a8f7e',false);
  drawSparkline('spark-score','#f0a832',true);
}
setInterval(simulate,3000);

function refreshAll(){drawAllCharts();renderPlatforms()}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INTERACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setPage(page){
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  event.currentTarget.classList.add('active');
  // Could expand to actually switch views; for now shows feedback
}

function setChartRange(range,btn){
  currentRange=range;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  drawTimeline();
}

function exportReport(){
  alert('Report export would generate a PDF summary of your weekly usage â€” connect to your Django backend to implement.');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('load',()=>{
  setTimeout(drawAllCharts,80);
});
window.addEventListener('resize',drawAllCharts);
</script>
</body>
</html>
